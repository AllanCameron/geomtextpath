<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="geomtextpath">
<title>Introduction to geomtextpath • geomtextpath</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to geomtextpath">
<meta property="og:description" content="geomtextpath">
<meta property="og:image" content="https://allancameron.github.io/geomtextpath/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">geomtextpath</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/geomtextpath.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/aesthetics.html">Aesthetics, Parameters and Scales</a>
    <a class="dropdown-item" href="../articles/curved_polar.html">Curved Text in Polar Co-ordinates</a>
    <a class="dropdown-item" href="../articles/gallery.html">Gallery of Examples</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/AllanCameron/geomtextpath/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="geomtextpath_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Introduction to geomtextpath</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/AllanCameron/geomtextpath/blob/HEAD/vignettes/geomtextpath.Rmd" class="external-link"><code>vignettes/geomtextpath.Rmd</code></a></small>
      <div class="d-none name"><code>geomtextpath.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://allancameron.github.io/geomtextpath/">geomtextpath</a></span><span class="op">)</span></code></pre></div>
<div class="section level2">
<h2 id="text-on-a-path">Text on a path<a class="anchor" aria-label="anchor" href="#text-on-a-path"></a>
</h2>
<p>The goal of the <code>geomtextpath</code> package is to directly label line-based plots with text that is able to follow a curved path. It is an extension of the <code>ggplot2</code> plotting library. Those already familiar with ggplot2 and the <code><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_path()</a></code> and <code><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_text()</a></code> geometries, can easily display a path or some text.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">t</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">5</span>, <span class="op">-</span><span class="fl">1</span>, length.out <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span> <span class="op">*</span> <span class="va">pi</span>
<span class="va">spiral</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>
  x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Trig.html" class="external-link">sin</a></span><span class="op">(</span><span class="va">t</span><span class="op">)</span> <span class="op">*</span> <span class="fl">1000</span><span class="op">:</span><span class="fl">1</span>,
  y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Trig.html" class="external-link">cos</a></span><span class="op">(</span><span class="va">t</span><span class="op">)</span> <span class="op">*</span> <span class="fl">1000</span><span class="op">:</span><span class="fl">1</span>
<span class="op">)</span>
<span class="va">rhyme</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span>
  <span class="st">"Like a circle in a spiral, like a wheel within a wheel,"</span>,
  <span class="st">"never ending or beginning on an ever spinning reel"</span>
<span class="op">)</span>

<span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">spiral</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_fixed.html" class="external-link">coord_equal</a></span><span class="op">(</span>xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1000</span>, <span class="fl">1000</span><span class="op">)</span>, ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1000</span>, <span class="fl">1000</span><span class="op">)</span><span class="op">)</span>
<span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_path</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>subtitle <span class="op">=</span> <span class="st">"geom_path()"</span><span class="op">)</span>
<span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html" class="external-link">geom_text</a></span><span class="op">(</span>
  data  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">0</span>, y <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>,
  size  <span class="op">=</span> <span class="fl">4</span>, label <span class="op">=</span> <span class="va">rhyme</span>
<span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>subtitle <span class="op">=</span> <span class="st">"geom_text()"</span><span class="op">)</span></code></pre></div>
<p><img src="geomtextpath_files/figure-html/path_and_text_spiral-1.png" width="45%"><img src="geomtextpath_files/figure-html/path_and_text_spiral-2.png" width="45%"></p>
<p>The <code>geomtextpath</code> extension follows these ggplot2 conventions and displays the path and the text by projecting the text along the curve.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="../reference/geom_textpath.html">geom_textpath</a></span><span class="op">(</span>
  size  <span class="op">=</span> <span class="fl">4</span>, label <span class="op">=</span> <span class="va">rhyme</span>
<span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>subtitle <span class="op">=</span> <span class="st">"geom_textpath()"</span><span class="op">)</span></code></pre></div>
<p><img src="geomtextpath_files/figure-html/textpath_spiral-1.png" width="75%" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>All of the line-based geom layers in <code>ggplot2</code> indicated below, have text and text-box equivalents in the <code>geomtextpath</code> package:</p>
<table class="table">
<thead><tr class="header">
<th align="left"><strong>ggplot geom</strong></th>
<th align="left"><strong>Text equivalent</strong></th>
<th align="left"><strong>Label equivalent</strong></th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><code>geom_path</code></td>
<td align="left"><code>geom_textpath</code></td>
<td align="left"><code>geom_labelpath</code></td>
</tr>
<tr class="even">
<td align="left"><code>geom_segment</code></td>
<td align="left"><code>geom_textsegment</code></td>
<td align="left"><code>geom_labelsegment</code></td>
</tr>
<tr class="odd">
<td align="left"><code>geom_line</code></td>
<td align="left"><code>geom_textline</code></td>
<td align="left"><code>geom_labelline</code></td>
</tr>
<tr class="even">
<td align="left"><code>geom_abline</code></td>
<td align="left"><code>geom_textabline</code></td>
<td align="left"><code>geom_labelabline</code></td>
</tr>
<tr class="odd">
<td align="left"><code>geom_hline</code></td>
<td align="left"><code>geom_texthline</code></td>
<td align="left"><code>geom_labelhline</code></td>
</tr>
<tr class="even">
<td align="left"><code>geom_vline</code></td>
<td align="left"><code>geom_textvline</code></td>
<td align="left"><code>geom_labelvline</code></td>
</tr>
<tr class="odd">
<td align="left"><code>geom_density</code></td>
<td align="left"><code>geom_textdensity</code></td>
<td align="left"><code>geom_labeldensity</code></td>
</tr>
<tr class="even">
<td align="left"><code>geom_smooth</code></td>
<td align="left"><code>geom_textsmooth</code></td>
<td align="left"><code>geom_labelsmooth</code></td>
</tr>
<tr class="odd">
<td align="left"><code>geom_contour</code></td>
<td align="left"><code>geom_textcontour</code></td>
<td align="left"><code>geom_labelcontour</code></td>
</tr>
<tr class="even">
<td align="left"><code>geom_density2d</code></td>
<td align="left"><code>geom_textdensity2d</code></td>
<td align="left"><code>geom_labeldensity2d</code></td>
</tr>
<tr class="odd">
<td align="left"><code>geom_sf</code></td>
<td align="left"><code>geom_textsf</code></td>
<td align="left"><code>geom_labelsf</code></td>
</tr>
</tbody>
</table>
<p>Each of these aims to provide the same functionality as the equivalent ggplot2 geom, but with the addition of a <code>label</code> aesthetic that will automatically label the line, even if it follows a curved path.</p>
</div>
<div class="section level2">
<h2 id="stat-layers">Stat layers<a class="anchor" aria-label="anchor" href="#stat-layers"></a>
</h2>
<p>Although we made an effort to provide text-path equivalents for commonly used stat-based geoms, such as <code><a href="https://ggplot2.tidyverse.org/reference/geom_density.html" class="external-link">geom_density()</a></code> or <code><a href="https://ggplot2.tidyverse.org/reference/geom_smooth.html" class="external-link">geom_smooth()</a></code>, there is not an equivalent for <em>every</em> stat-based geom. However, the flexibility of ggplot2 allows that most stats can be combined with any geom. Provided that the stat provides path-like output, this means that for example <code><a href="https://ggplot2.tidyverse.org/reference/stat_ellipse.html" class="external-link">stat_ellipse()</a></code> can be combined with <code><a href="../reference/geom_textpath.html">geom_textpath()</a></code> by setting <code>geom = "textpath"</code> or <code>geom = "labelpath"</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">iris</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span><span class="va">Sepal.Width</span>, <span class="va">Sepal.Length</span>, colour <span class="op">=</span> <span class="va">Species</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/stat_ellipse.html" class="external-link">stat_ellipse</a></span><span class="op">(</span>
    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="va">Species</span><span class="op">)</span>,
    geom <span class="op">=</span> <span class="st">"textpath"</span>, hjust <span class="op">=</span> <span class="fl">0.25</span>,
  <span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span></code></pre></div>
<p><img src="geomtextpath_files/figure-html/geom_in_stat-1.png" width="50%"></p>
<p>Alternatively, one could also specify the stat inside <code><a href="../reference/geom_textpath.html">geom_textpath()</a></code> or <code><a href="../reference/geom_textpath.html">geom_labelpath()</a></code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="../reference/geom_textpath.html">geom_labelpath</a></span><span class="op">(</span>
    stat <span class="op">=</span> <span class="st">"function"</span>, 
    fun <span class="op">=</span> <span class="op">~</span> <span class="fl">1</span> <span class="op">/</span> <span class="op">(</span><span class="fl">1</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="op">-</span><span class="va">.x</span><span class="op">)</span><span class="op">)</span>,
    label <span class="op">=</span> <span class="st">"Sigmoid function"</span>
  <span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html" class="external-link">xlim</a></span><span class="op">(</span><span class="op">-</span><span class="fl">6</span>, <span class="fl">6</span><span class="op">)</span></code></pre></div>
<p><img src="geomtextpath_files/figure-html/stat_in_geom-1.png" width="50%"></p>
</div>
<div class="section level2">
<h2 id="angles-across-aspect-ratios">Angles across aspect ratios<a class="anchor" aria-label="anchor" href="#angles-across-aspect-ratios"></a>
</h2>
<p>The mechanism underlying the text positioning will take account of the plotting window however it is rescaled. This means text continues to stick together and follow the path at the correct angle as the plotting window changes in size or in aspect ratio. This is all done in the background, without the need to call your plotting code again every time the window is resized. For example, here is the same plot drawn with different dimensions:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="../reference/geom_textpath.html">geom_textpath</a></span><span class="op">(</span>
  size  <span class="op">=</span> <span class="fl">4</span>, label <span class="op">=</span> <span class="va">rhyme</span>
<span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html" class="external-link">coord_cartesian</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>subtitle <span class="op">=</span> <span class="st">"geom_textpath()"</span><span class="op">)</span>
<span class="co">#&gt; Coordinate system already present. Adding new coordinate system, which will replace the existing one.</span></code></pre></div>
<p><img src="geomtextpath_files/figure-html/skinny-1.png" width="50%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="../reference/geom_textpath.html">geom_textpath</a></span><span class="op">(</span>
  size  <span class="op">=</span> <span class="fl">4</span>, label <span class="op">=</span> <span class="va">rhyme</span>
<span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html" class="external-link">coord_cartesian</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>subtitle <span class="op">=</span> <span class="st">"geom_textpath()"</span><span class="op">)</span>
<span class="co">#&gt; Coordinate system already present. Adding new coordinate system, which will replace the existing one.</span></code></pre></div>
<p><img src="geomtextpath_files/figure-html/wide-1.png" width="100%" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="how-does-it-work">How does it work?<a class="anchor" aria-label="anchor" href="#how-does-it-work"></a>
</h2>
<p>At the heart of {geomtextpath} is <code><a href="../reference/textpathGrob.html">textpathGrob()</a></code>. This is a type of graphical object (known as a “grob”), which is drawn by the {grid} graphics package on which {ggplot2} is built. Everything that you see in your plotting device when you draw a ggplot is made up of grobs.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">grob</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/textpathGrob.html">textpathGrob</a></span><span class="op">(</span>label <span class="op">=</span> <span class="st">"My\nlabel"</span>, x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.25</span>, <span class="fl">0.75</span><span class="op">)</span>, 
                     y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.25</span>, <span class="fl">0.75</span><span class="op">)</span>, id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span>
<span class="va">grob</span>
<span class="co">#&gt; textpath[GRID.textpath.286]</span></code></pre></div>
<p>When a <code>textpathGrob</code> is created, it measures the dimensions of the given text label letter-by-letter with the {textshaping} package. The measurements are stored, along with the x, y values of the path and any graphics parameters such as color, linewidth and font.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">grob</span><span class="op">$</span><span class="va">textpath</span><span class="op">$</span><span class="va">label</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>
<span class="co">#&gt;   glyph       ymin       xmin       xmid       xmax substring y_id</span>
<span class="co">#&gt; 1     M  0.1162109 0.00000000 0.07183160 0.14366319         1    2</span>
<span class="co">#&gt; 2     y  0.1162109 0.14388021 0.19314236 0.24240451         1    2</span>
<span class="co">#&gt; 3     l -0.1162109 0.00000000 0.02300347 0.04600694         1    3</span>
<span class="co">#&gt; 4     a -0.1162109 0.04622396 0.09722222 0.14822049         1    3</span>
<span class="co">#&gt; 5     b -0.1162109 0.14843750 0.20138889 0.25434028         1    3</span>
<span class="co">#&gt; 6     e -0.1162109 0.25434028 0.30555556 0.35677083         1    3</span>
<span class="co">#&gt; 7     l -0.1162109 0.35698785 0.37999132 0.40299479         1    3</span></code></pre></div>
<p>When a plot is drawn, or the plotting window is rescaled, the {grid} package always calls <code>makeContent</code> for each grob in the current display device. This makes information about the aspect ratio and absolute size of the current viewport available for further calculations to be made on-the-fly if necessary before anything is actually drawn.</p>
<p>The {geomtextpath} package was possible because the <code>makeContent</code> function is generic, meaning that we were able to create a <code>makeContent.textpath</code> function. This takes the letter dimensions stored in the grob, the x, y co-ordinates of the path stored in the grob, and the device dimensions, applying simple(ish) trigonometry to work out where each letter should be placed and at what angle. Once this is known, the path and its associated gap can be calculated. The actual drawing part is then done by dispatching this information to the grid functions <code>textGrob</code> and <code>linesGrob</code>, which directly draw the graphical objects on the plotting device.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/grid.newpage.html" class="external-link">grid.newpage</a></span><span class="op">(</span><span class="op">)</span>
<span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/grid.draw.html" class="external-link">grid.draw</a></span><span class="op">(</span><span class="va">grob</span><span class="op">)</span></code></pre></div>
<p><img src="geomtextpath_files/figure-html/grid-1.png" width="50%"></p>
<p>We have tried to make any calculations done inside the <code>makeContent</code> stage efficient, so that there is not a noticeable lag in the plot being redrawn when the window is rescaled.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Allan Cameron, Teun van den Brand.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
